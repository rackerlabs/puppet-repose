<?xml version="1.0" encoding="UTF-8"?>

<!-- To configure Repose see: http://wiki.openrepose.org/display/REPOSE/Configuration -->
<system-model xmlns="http://docs.rackspacecloud.com/repose/system-model/v2.0">
  <repose-cluster id="<%= app_name %>">
    <nodes>
<% nodes.sort.each do |node| %>
        <node id="<%= node.split[0] %>" hostname="<%= node %>" http-port="<%= port -%>"/>
<% end %>
    </nodes>
    <filters>
<% filters.keys.sort.each do |key| %>
      <filter <% filters[key].sort.map do |param, value| %><%= param %>="<%= value %>" <% end %>/>
<% end %>
    </filters>
    <destinations>
<% endpoints.each do |endpoint| %>
      <endpoint <% endpoint.sort.map do |param, value| %><%= param %>="<%= value %>" <% end %>/>
<% end %>
    </destinations>
  </repose-cluster>
</system-model>

